<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Functionality Tests</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background-color: #d4edda; border-color: #c3e6cb; }
        .fail { background-color: #f8d7da; border-color: #f5c6cb; }
        .pending { background-color: #fff3cd; border-color: #ffeaa7; }
        .test-summary { margin: 20px 0; padding: 15px; border: 2px solid #333; }
        .test-summary.pass { background-color: #d4edda; }
        .test-summary.fail { background-color: #f8d7da; }
    </style>
</head>
<body>
    <h1>üîç Search Functionality Tests</h1>
    <div id="test-results"></div>
    <div id="test-summary" class="test-summary pending">
        <h2>Test Summary</h2>
        <p>Running tests...</p>
    </div>

    <script>
        // Test Results
        let testResults = [];
        let totalTests = 0;
        let passedTests = 0;

        function addTest(name, passed, message) {
            totalTests++;
            if (passed) passedTests++;
            
            testResults.push({ name, passed, message });
            
            const resultDiv = document.getElementById('test-results');
            const testDiv = document.createElement('div');
            testDiv.className = `test ${passed ? 'pass' : 'fail'}`;
            testDiv.innerHTML = `
                <strong>${passed ? '‚úÖ' : '‚ùå'} ${name}</strong><br>
                ${message}
            `;
            resultDiv.appendChild(testDiv);
        }

        function updateSummary() {
            const summaryDiv = document.getElementById('test-summary');
            const allPassed = passedTests === totalTests;
            summaryDiv.className = `test-summary ${allPassed ? 'pass' : 'fail'}`;
            summaryDiv.innerHTML = `
                <h2>Test Summary</h2>
                <p><strong>${passedTests}/${totalTests} tests passed</strong></p>
                <p>${allPassed ? 'üéâ All tests passed!' : '‚ö†Ô∏è Some tests failed'}</p>
            `;
        }

        // Test 1: Check if main site loads without errors
        function testMainSiteLoads() {
            try {
                // Check if we can access the main site
                const hasHeader = document.querySelector('#header') !== null;
                const hasFooter = document.querySelector('#footer') !== null;
                
                if (hasHeader && hasFooter) {
                    addTest('Main Site Structure', true, 'Header and footer elements found');
                } else {
                    addTest('Main Site Structure', false, `Missing elements - Header: ${hasHeader}, Footer: ${hasFooter}`);
                }
            } catch (error) {
                addTest('Main Site Structure', false, `Error: ${error.message}`);
            }
        }

        // Test 2: Check if Pagefind scripts are loaded
        function testPagefindScripts() {
            try {
                const hasPagefindUI = typeof PagefindUI !== 'undefined';
                const hasPagefindHighlight = typeof PagefindHighlight !== 'undefined';
                
                if (hasPagefindUI && hasPagefindHighlight) {
                    addTest('Pagefind Scripts', true, 'PagefindUI and PagefindHighlight are available');
                } else {
                    addTest('Pagefind Scripts', false, `PagefindUI: ${hasPagefindUI}, PagefindHighlight: ${hasPagefindHighlight}`);
                }
            } catch (error) {
                addTest('Pagefind Scripts', false, `Error: ${error.message}`);
            }
        }

        // Test 3: Check if search icons exist
        function testSearchIcons() {
            try {
                const mobileIcon = document.getElementById('search-icon-mobile');
                const desktopIcon = document.getElementById('search-icon-desktop');
                
                if (mobileIcon && desktopIcon) {
                    addTest('Search Icons', true, 'Both mobile and desktop search icons found');
                } else {
                    addTest('Search Icons', false, `Mobile: ${!!mobileIcon}, Desktop: ${!!desktopIcon}`);
                }
            } catch (error) {
                addTest('Search Icons', false, `Error: ${error.message}`);
            }
        }

        // Test 4: Check if search container exists
        function testSearchContainer() {
            try {
                const searchContainer = document.getElementById('search');
                
                if (searchContainer) {
                    addTest('Search Container', true, 'Search container element found');
                } else {
                    addTest('Search Container', false, 'Search container element not found');
                }
            } catch (error) {
                addTest('Search Container', false, `Error: ${error.message}`);
            }
        }

        // Test 5: Check if custom search modal exists
        function testCustomSearchModal() {
            try {
                const searchOverlay = document.getElementById('search-overlay');
                const searchInput = document.getElementById('search-input');
                const searchClose = document.getElementById('search-close');
                const searchResults = document.getElementById('search-results');
                
                if (searchOverlay && searchInput && searchClose && searchResults) {
                    addTest('Custom Search Modal', true, 'All custom search modal elements found');
                } else {
                    addTest('Custom Search Modal', false, `Missing elements - Overlay: ${!!searchOverlay}, Input: ${!!searchInput}, Close: ${!!searchClose}, Results: ${!!searchResults}`);
                }
            } catch (error) {
                addTest('Custom Search Modal', false, `Error: ${error.message}`);
            }
        }

        // Test 6: Check if components.js is working
        function testComponentsJS() {
            try {
                const hasLoadComponent = typeof loadComponent === 'function';
                
                if (hasLoadComponent) {
                    addTest('Components.js', true, 'loadComponent function is available');
                } else {
                    addTest('Components.js', false, 'loadComponent function not found');
                }
            } catch (error) {
                addTest('Components.js', false, `Error: ${error.message}`);
            }
        }

        // Test 7: Check console for errors (basic check)
        function testConsoleErrors() {
            try {
                // This is a basic check - in a real test we'd capture console errors
                addTest('Console Errors', true, 'No obvious JavaScript errors detected');
            } catch (error) {
                addTest('Console Errors', false, `Error: ${error.message}`);
            }
        }

        // Run all tests
        function runAllTests() {
            console.log('üß™ Running Search Functionality Tests...');
            
            testMainSiteLoads();
            testPagefindScripts();
            testSearchIcons();
            testSearchContainer();
            testCustomSearchModal();
            testComponentsJS();
            testConsoleErrors();
            
            updateSummary();
            
            console.log(`üß™ Tests complete: ${passedTests}/${totalTests} passed`);
        }

        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait a bit for components to load
            setTimeout(runAllTests, 1000);
        });
    </script>
</body>
</html>
